import{e as ie,f as oe,g as ue}from"./chunk-RVIU7NCN.js";var $=ie(oe(),1);var w=ie(oe());function se(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(t[n[a]]=e[n[a]]);return t}var z;(function(e){e.event="event",e.props="prop"})(z||(z={}));function M(){}function X(e){return!!(e||"").match(/\d/)}function Z(e){return e==null}function me(e){return typeof e=="number"&&isNaN(e)}function ge(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Ve(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Re(e,r,t){var n=Ve(t),a=e.search(/[1-9]/);return a=a===-1?e.length:a,e.substring(0,a)+e.substring(a,e.length).replace(n,"$1"+r)}function Ae(e){var r=(0,w.useRef)(e);r.current=e;var t=(0,w.useRef)(function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return r.current.apply(r,n)});return t.current}function ae(e,r){r===void 0&&(r=!0);var t=e[0]==="-",n=t&&r;e=e.replace("-","");var a=e.split("."),i=a[0],l=a[1]||"";return{beforeDecimal:i,afterDecimal:l,hasNegation:t,addNegation:n}}function Be(e){if(!e)return e;var r=e[0]==="-";r&&(e=e.substring(1,e.length));var t=e.split("."),n=t[0].replace(/^0+/,"")||"0",a=t[1]||"";return(r?"-":"")+n+(a?"."+a:"")}function he(e,r,t){for(var n="",a=t?"0":"",i=0;i<=r-1;i++)n+=e[i]||a;return n}function fe(e,r){return Array(r+1).join(e)}function Se(e){var r=e+"",t=r[0]==="-"?"-":"";t&&(r=r.substring(1));var n=r.split(/[eE]/g),a=n[0],i=n[1];if(i=Number(i),!i)return t+a;a=a.replace(".","");var l=1+i,m=a.length;return l<0?a="0."+fe("0",Math.abs(l))+a:l>=m?a=a+fe("0",l-m):a=(a.substring(0,l)||"0")+"."+a.substring(l),t+a}function le(e,r,t){if(["","-"].indexOf(e)!==-1)return e;var n=(e.indexOf(".")!==-1||t)&&r,a=ae(e),i=a.beforeDecimal,l=a.afterDecimal,m=a.hasNegation,S=parseFloat("0."+(l||"0")),y=l.length<=r?"0."+l:S.toFixed(r),g=y.split("."),s=i.split("").reverse().reduce(function(d,N,I){return d.length>I?(Number(d[0])+Number(N)).toString()+d.substring(1,d.length):N+d},g[0]),v=he(g[1]||"",r,t),f=m?"-":"",p=n?".":"";return""+f+s+p+v}function U(e,r){if(e.value=e.value,e!==null){if(e.createTextRange){var t=e.createTextRange();return t.move("character",r),t.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(r,r),!0):(e.focus(),!1)}}function Oe(e,r){for(var t=0,n=0,a=e.length,i=r.length;e[t]===r[t]&&t<a;)t++;for(;e[a-1-n]===r[i-1-n]&&i-n>t&&a-n>t;)n++;return{from:{start:t,end:a-n},to:{start:t,end:i-n}}}function _e(e,r,t){return Math.min(Math.max(e,r),t)}function ve(e){return Math.max(e.selectionStart,e.selectionEnd)}function Te(){return typeof navigator!="undefined"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function ke(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function Pe(e,r,t,n,a,i){var l=a.findIndex(function(R){return R}),m=e.slice(0,l);!r&&!t.startsWith(m)&&(t=m+t,n=n+m.length);for(var S=t.length,y=e.length,g={},s=new Array(S),v=0;v<S;v++){s[v]=-1;for(var f=0,p=y;f<p;f++)if(t[v]===e[f]&&g[f]!==!0){s[v]=f,g[f]=!0;break}}for(var d=n;d<S&&(s[d]===-1||!i(t[d]));)d++;var N=d===S||s[d]===-1?y:s[d];for(d=n-1;d>0&&s[d]===-1;)d--;var I=d===-1||s[d]===-1?0:s[d]+1;return I>N?N:n-I<N-n?I:N}function ce(e,r,t,n){var a=e.length;if(r=_e(r,0,a),n==="left"){for(;r>=0&&!t[r];)r--;r===-1&&(r=t.indexOf(!0))}else{for(;r<=a&&!t[r];)r++;r>a&&(r=t.lastIndexOf(!0))}return r===-1&&(r=a),r}function Me(e){for(var r=Array.from({length:e.length+1}).map(function(){return!0}),t=0,n=r.length;t<n;t++)r[t]=!!(X(e[t])||X(e[t-1]));return r}function ye(e,r,t,n,a,i){i===void 0&&(i=M);var l=(0,w.useRef)(),m=Ae(function(v){var f,p;return Z(v)||me(v)?(p="",f=""):typeof v=="number"||t?(p=typeof v=="number"?Se(v):v,f=n(p)):(p=a(v,void 0),f=v),{formattedValue:f,numAsString:p}}),S=(0,w.useState)(function(){return m(r)}),y=S[0],g=S[1],s=function(v,f){g({formattedValue:v.formattedValue,numAsString:v.value}),i(v,f)};return(0,w.useMemo)(function(){Z(e)?l.current=void 0:(l.current=m(e),g(l.current))},[e,m]),[y,s]}function je(e){return e.replace(/[^0-9]/g,"")}function Le(e){return e}function Ke(e){var r=e.type;r===void 0&&(r="text");var t=e.displayType;t===void 0&&(t="input");var n=e.customInput,a=e.renderText,i=e.getInputRef,l=e.format;l===void 0&&(l=Le);var m=e.removeFormatting;m===void 0&&(m=je);var S=e.defaultValue,y=e.valueIsNumericString,g=e.onValueChange,s=e.isAllowed,v=e.onChange;v===void 0&&(v=M);var f=e.onKeyDown;f===void 0&&(f=M);var p=e.onMouseUp;p===void 0&&(p=M);var d=e.onFocus;d===void 0&&(d=M);var N=e.onBlur;N===void 0&&(N=M);var I=e.value,R=e.getCaretBoundary;R===void 0&&(R=Me);var O=e.isValidInputCharacter;O===void 0&&(O=X);var _=se(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter"]),k=ye(I,S,!!y,l,m,g),j=k[0],E=j.formattedValue,L=j.numAsString,H=k[1],P=(0,w.useRef)(),ee=function(o,u){P.current=o.formattedValue,H(o,u)};(0,w.useEffect)(function(){var o=l(L);if(P.current===void 0||o!==P.current){var u=b.current;W({formattedValue:o,numAsString:L,input:u,setCaretPosition:!0,source:z.props,event:void 0})}});var q=(0,w.useState)(!1),re=q[0],h=q[1],b=(0,w.useRef)(null),A=(0,w.useRef)({setCaretTimeout:null,focusTimeout:null});(0,w.useEffect)(function(){return h(!0),function(){clearTimeout(A.current.setCaretTimeout),clearTimeout(A.current.focusTimeout)}},[]);var T=l,J=function(o,u){var c=parseFloat(u);return{formattedValue:o,value:u,floatValue:isNaN(c)?void 0:c}},B=function(o,u,c){U(o,u),A.current.setCaretTimeout=setTimeout(function(){o.value===c&&U(o,u)},0)},K=function(o,u,c){return ce(o,u,R(o),c)},Q=function(o,u,c){var D=R(u),C=Pe(u,E,o,c,D,O);return C=ce(u,C,D),C},W=function(o){var u=o.formattedValue;u===void 0&&(u="");var c=o.input,D=o.setCaretPosition;D===void 0&&(D=!0);var C=o.source,x=o.event,F=o.numAsString,V=o.caretPos;if(c){if(V===void 0&&D){var G=o.inputValue||c.value,te=ve(c);c.value=u,V=Q(G,u,te)}c.value=u,D&&V!==void 0&&B(c,V,u)}u!==E&&ee(J(u,F),{event:x,source:C})},xe=function(o,u,c){var D=Oe(E,o),C=Object.assign(Object.assign({},D),{lastValue:E}),x=m(o,C),F=T(x);if(s&&!s(J(F,x))){var V=u.target,G=ve(V),te=Q(o,E,G);return B(V,te,E),!1}return W({formattedValue:F,numAsString:x,inputValue:o,event:u,source:c,setCaretPosition:!0,input:u.target}),!0},we=function(o){var u=o.target,c=u.value,D=xe(c,o,z.event);D&&v(o)},De=function(o){var u=o.target,c=o.key,D=u.selectionStart,C=u.selectionEnd,x=u.value;x===void 0&&(x="");var F;if(c==="ArrowLeft"||c==="Backspace"?F=Math.max(D-1,0):c==="ArrowRight"?F=Math.min(D+1,x.length):c==="Delete"&&(F=D),F===void 0||D!==C){f(o);return}var V=F;if(c==="ArrowLeft"||c==="ArrowRight"){var G=c==="ArrowLeft"?"left":"right";V=K(x,F,G)}else c==="Delete"&&!O(x[F])?V=K(x,F,"right"):c==="Backspace"&&!O(x[F])&&(V=K(x,F,"left"));V!==F&&B(u,V,x),o.isUnitTestRun&&B(u,V,x),f(o)},Ce=function(o){var u=o.target,c=u.selectionStart,D=u.selectionEnd,C=u.value;if(C===void 0&&(C=""),c===D){var x=K(C,c);x!==c&&B(u,x,C)}p(o)},Ne=function(o){o.persist();var u=o.target;b.current=u,A.current.focusTimeout=setTimeout(function(){var c=u.selectionStart,D=u.selectionEnd,C=u.value;C===void 0&&(C="");var x=K(C,c);x!==c&&!(c===0&&D===C.length)&&B(u,x,C),d(o)},0)},Fe=function(o){b.current=null,clearTimeout(A.current.focusTimeout),clearTimeout(A.current.setCaretTimeout),N(o)},Ie=re&&Te()?"numeric":void 0,ne=Object.assign({inputMode:Ie},_,{type:r,value:E,onChange:we,onKeyDown:De,onMouseUp:Ce,onFocus:Ne,onBlur:Fe});if(t==="text")return a?w.default.createElement(w.default.Fragment,null,a(E,_)||null):w.default.createElement("span",Object.assign({},_,{ref:i}),E);if(n){var Ee=n;return w.default.createElement(Ee,Object.assign({},ne,{ref:i}))}return w.default.createElement("input",Object.assign({},ne,{ref:i}))}function de(e,r){var t=r.decimalScale,n=r.fixedDecimalScale,a=r.prefix;a===void 0&&(a="");var i=r.suffix;i===void 0&&(i="");var l=r.allowNegative;l===void 0&&(l=!0);var m=r.thousandsGroupStyle;if(m===void 0&&(m="thousand"),e===""||e==="-")return e;var S=Y(r),y=S.thousandSeparator,g=S.decimalSeparator,s=t!==0&&e.indexOf(".")!==-1||t&&n,v=ae(e,l),f=v.beforeDecimal,p=v.afterDecimal,d=v.addNegation;return t!==void 0&&(p=he(p,t,!!n)),y&&(f=Re(f,y,m)),a&&(f=a+f),i&&(p=p+i),d&&(f="-"+f),e=f+(s&&g||"")+p,e}function Y(e){var r=e.decimalSeparator;r===void 0&&(r=".");var t=e.thousandSeparator,n=e.allowedDecimalSeparators;return t===!0&&(t=","),n||(n=[r,"."]),{decimalSeparator:r,thousandSeparator:t,allowedDecimalSeparators:n}}function $e(e,r){e===void 0&&(e="");var t=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),a=t.test(e),i=n.test(e);return e=e.replace(/-/g,""),a&&!i&&r&&(e="-"+e),e}function Ue(e,r){return new RegExp("(^-)|[0-9]|"+ge(e),r?"g":void 0)}function We(e,r,t){r===void 0&&(r=ke(e));var n=t.allowNegative;n===void 0&&(n=!0);var a=t.prefix;a===void 0&&(a="");var i=t.suffix;i===void 0&&(i="");var l=t.decimalScale,m=r.from,S=r.to,y=S.start,g=S.end,s=Y(t),v=s.allowedDecimalSeparators,f=s.decimalSeparator,p=e[g]===f;if(g-y===1&&v.indexOf(e[y])!==-1){var d=l===0?"":f;e=e.substring(0,y)+d+e.substring(y+1,e.length)}var N=!1;a.startsWith("-")?N=e.startsWith("--"):i.startsWith("-")&&e.length===i.length?N=!1:e[0]==="-"&&(N=!0),N&&(e=e.substring(1),y-=1,g-=1);var I=0;e.startsWith(a)?I+=a.length:y<a.length&&(I=y),e=e.substring(I),g-=I;var R=e.length,O=e.length-i.length;e.endsWith(i)?R=O:g>e.length-i.length&&(R=g),e=e.substring(0,R),e=$e(N?"-"+e:e,n),e=(e.match(Ue(f,!0))||[]).join("");var _=e.indexOf(f);e=e.replace(new RegExp(ge(f),"g"),function(H,P){return P===_?".":""});var k=ae(e,n),j=k.beforeDecimal,E=k.afterDecimal,L=k.addNegation;return S.end-S.start<m.end-m.start&&j===""&&p&&!parseFloat(E)&&(e=L?"-":""),e}function Ge(e,r){var t=r.prefix;t===void 0&&(t="");var n=r.suffix;n===void 0&&(n="");var a=Array.from({length:e.length+1}).map(function(){return!0}),i=e[0]==="-";a.fill(!1,0,t.length+(i?1:0));var l=e.length;return a.fill(!1,l-n.length+1,l+1),a}function Ze(e){var r=Y(e),t=r.thousandSeparator,n=r.decimalSeparator;if(t===n)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+t+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+n+` (default value for decimalSeparator is .)
     `)}function ze(e){var r=e.decimalSeparator;r===void 0&&(r=".");var t=e.allowedDecimalSeparators,n=e.thousandsGroupStyle,a=e.suffix,i=e.allowNegative,l=e.allowLeadingZeros,m=e.onKeyDown;m===void 0&&(m=M);var S=e.onBlur;S===void 0&&(S=M);var y=e.thousandSeparator,g=e.decimalScale,s=e.fixedDecimalScale,v=e.prefix;v===void 0&&(v="");var f=e.defaultValue,p=e.value,d=e.valueIsNumericString,N=e.onValueChange,I=se(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]);Ze(e);var R=function(h){return de(h,e)},O=function(h,b){return We(h,b,e)},_=d;Z(p)?Z(f)||(_=d!=null?d:typeof f=="number"):_=d!=null?d:typeof p=="number";var k=function(h){return Z(h)||me(h)?h:(typeof h=="number"&&(h=Se(h)),_&&typeof g=="number"?le(h,g,!!s):h)},j=ye(k(p),k(f),!!_,R,O,N),E=j[0],L=E.numAsString,H=E.formattedValue,P=j[1],ee=function(h){var b=h.target,A=h.key,T=b.selectionStart,J=b.selectionEnd,B=b.value;if(B===void 0&&(B=""),T!==J){m(h);return}A==="Backspace"&&B[0]==="-"&&T===v.length+1&&U(b,1);var K=Y(e),Q=K.decimalSeparator;A==="Backspace"&&B[T-1]===Q&&g&&s&&(U(b,T-1),h.preventDefault());var W=y===!0?",":y;A==="Backspace"&&B[T-1]===W&&U(b,T-1),A==="Delete"&&B[T]===W&&U(b,T+1),m(h)},q=function(h){var b=L;if(b.match(/\d/g)||(b=""),l||(b=Be(b)),s&&g&&(b=le(b,g,s)),b!==L){var A=de(b,e);P({formattedValue:A,value:b,floatValue:parseFloat(b)},{event:h,source:z.event})}S(h)},re=function(h){return h===r?!0:X(h)};return Object.assign(Object.assign({},I),{value:H,valueIsNumericString:!1,isValidInputCharacter:re,onValueChange:P,format:R,removeFormatting:O,getCaretBoundary:function(h){return Ge(h,e)},onKeyDown:ee,onBlur:q})}function pe(e){var r=ze(e);return w.default.createElement(Ke,Object.assign({},r))}var He=ue("div")({name:"NumberOverlayEditorStyle",class:"n1czszh3",propsAsIs:!1});function be(){var e,r,t;let a=(t=(r=(e=Intl.NumberFormat())==null?void 0:e.formatToParts(1.1))==null?void 0:r.find(i=>i.type==="decimal"))==null?void 0:t.value;return a!=null?a:"."}function qe(){return be()==="."?",":"."}var Je=e=>{let{value:r,onChange:t,disabled:n,highlight:a,validatedSelection:i,fixedDecimals:l,allowNegative:m,thousandSeparator:S,decimalSeparator:y}=e,g=$.useRef();return $.useLayoutEffect(()=>{var s;if(i!==void 0){let v=typeof i=="number"?[i,null]:i;(s=g.current)==null||s.setSelectionRange(v[0],v[1])}},[i]),$.createElement(He,null,$.createElement(pe,{autoFocus:!0,getInputRef:g,className:"gdg-input",onFocus:s=>s.target.setSelectionRange(a?0:s.target.value.length,s.target.value.length),disabled:n===!0,decimalScale:l,allowNegative:m,thousandSeparator:S!=null?S:qe(),decimalSeparator:y!=null?y:be(),value:Object.is(r,-0)?"-":r!=null?r:"",onValueChange:t}))},er=Je;export{er as default};
